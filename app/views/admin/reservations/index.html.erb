<div class= "container">
  	<h2 class = text-center>築地寿司の予約</h2>
	<div class = "row">
		<div class = "col-xs-5">
			<div id="calendar"></div>
			<h4>＊<span style = "color:red;">赤色</span>は定休日になります</h4>
		</div>
		<div class = "col-xs-7">
  			<div class="btn-group btn-group-justified" >
  				<div class="btn-group">
			  		<%= link_to admin_reservations_path(link: "new") do %>
		            	<button class="btn btn-default">新着予約</button>
		          	<% end %>
		        </div>
		        <div class="btn-group">
		          	<%= link_to admin_reservations_path(link: "today") do %>
		            	<button class="btn btn-default">本日予約</button>
		          	<% end %>
		        </div>
		        <div class="btn-group">
		          	<%= link_to new_admin_reservation_path do %>
		            	<button class="btn btn-primary">予約追加</button>
		          	<% end %>
		        </div>
	        </div>
	        <h3>検索機能</h3>
          	<%= form_tag(admin_reservations_path,:method => 'get') do %>
		        <div class="form-group">
		        	<!-- *text_field_tag(要素名 [, 値, オプション]) -->
		            <%= text_field_tag :search_date, @search_day, id: "reservation_day",readonly: true,placeholder: 'カレンダーの日付をタップしてください', style: "width:250px; height:30px;" %>
		            <%= select_tag :reservation_type,options_for_select([["1日", ""],["ランチ", "lunch"],["ディナー","dinner"]], selected: @search_time)%>
		            <%= submit_tag ("検索する"), class:"btn btn-default" %>
		        </div>
	        <% end %>
	        <div>
        	<div>
		      	<p id="alert"><%= alert %></p>
		    </div>
		    </div>
	  		<table class ="table">
	  			<thead>
					<tr>
						<th>予約日</th>
						<th>予約時間</th>
						<th>お名前</th>
						<th>人数</th>
						<th></th>
						<th></th>
					</tr>
				</thead>
	            <tbody>
	              <% @reservations.each do |reservation| %>
	              <tr>
	              	<td><%= reservation.reservation_day%></td>
	                <td><%= reservation.reservation_time%></td>
	                <td><%= reservation.customer_name + "様"%></td>
	                <td><%= reservation.people%>人</td>
	                <td>
                  		<%= link_to admin_reservation_path(reservation.id) do %>
	                    	<button class="btn btn-success">詳細</button>
	                  	<% end %>
	                </td>
	                <td>
	                  	<%= link_to admin_reservation_path(reservation.id),method: :delete, data: {confirm: '削除しますか？'} do %>
	                    	<button class="btn btn-danger">削除</button>
	                  	<% end %>
	                </td>
	              </tr>
	              <% end %>
	            </tbody>
	        </table>
	        <div  class = "text-center">
	            <%= paginate @reservations %>
	        </div>
	    </div>
	</div>
</div>
<script type="text/javascript" charset="utf-8">
$(document).ready(function(){
	$('#calendar').fullCalendar({
	  	dayClick: function(date, jsEvent, view) {
		    $(this).on('click', function(){
		    	if($(this).hasClass('fc-past')){
   				 }else{
	    	    if($(this).hasClass('fc-sun')){
   				 }else{
		    	//クリックした日付が取れる
	    		$('#reservation_day').val(date.format());
	    		//選択状態だった場合クラスを削除する
		        $('td').removeClass('selected-date');
		        $('td').removeClass('fc-today');
		        //クリックされたtdに選択状態クラスを追加(addClass)する
		        $(this).addClass('selected-date');
		    	}
		    	}
		    });
	  	}
	});
});
</script>